<!--
How do you do music?
Well, it's easy
You just face your fears and you become your heroes

Musician
by Porter Robi(⚬⃔⚬ℕ⚬⃔⚬)son
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./icon.png" type="image/png">
    <meta content="A simple metronome web app." name="description">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Tempo Sync</title>
</head>
<body>
    <div class="container">
        <div class="header-container">
            <div class="brand">
                <img src="./icon.png" alt="Tempo Sync logo" class="brand-logo" width="44" height="44">
                <header>
                    <div class="brand-title-row">
                        <h1>Tempo Sync</h1>
                    </div>
                </header>
            </div>
            <div class="header-actions">
                <div class="theme-trigger">
                    <button class="header-button" id="themeButton" type="button" title="Open theme picker" aria-label="Open theme picker" aria-haspopup="dialog" aria-controls="themePanel" aria-expanded="false">
                        <i class="fa-solid fa-palette" aria-hidden="true"></i>
                        <span class="sr-only">Open theme picker</span>
                    </button>
                </div>
                <button class="header-button" id="presetButton" type="button" title="Open presets" aria-label="Open presets" aria-expanded="false">
                    <i class="fa-solid fa-list" aria-hidden="true"></i>
                </button>
            </div>
        </div>

        <div class="beat-display" id="beatDisplay">1</div>
        <div class="beat-display-hint">Click, tap here, or press 'T' to set tempo</div>

        <div class="controls">
            <div class="tempo-control">
                <button id="tempoDown" title="Decrease Tempo (D / ArrowDown)" aria-label="Decrease tempo">
                    <i class="fa-solid fa-minus"></i>
                </button>
                <div class="bpm-input-wrapper">
                    <input type="number" id="bpmInput" class="bpm-input" value="120" min="20" max="300" inputmode="numeric" title="Beats Per Minute" placeholder="BPM">
                    <span class="bpm-suffix">BPM</span>
                </div>
                <button id="tempoUp" title="Increase Tempo (I / ArrowUp)" aria-label="Increase tempo">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </div>

            <input type="range" id="tempoSlider" min="20" max="300" value="120" title="Tempo Slider">

            <div class="time-sig">
                <select id="beatsPerMeasure" title="Beats Per Measure">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4" selected>4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                </select>
                <span>/</span>
                <select id="beatUnit" title="Beat Unit">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="4" selected>4</option>
                    <option value="8">8</option>
                </select>
            </div>

            <div class="volume-control">
                <div class="volume-label">
                    <span class="volume-label-text">Volume</span>
                    <div class="volume-value-wrapper">
                        <input type="number" id="volumeValueInput" class="volume-value-input" min="0" max="100" value="100" inputmode="numeric" pattern="[0-9]*" aria-label="Volume percentage">
                        <span class="volume-value-suffix">%</span>
                    </div>
                </div>
                <input type="range" id="volumeControl" min="0" max="100" value="100" title="Volume Slider" aria-label="Volume slider">
            </div>

            <button id="playButton" title="Start/Stop The Metronome (Space)" aria-label="Start or stop the metronome">
                <i class="fa-solid fa-play"></i>
                <span>Play</span>
            </button>
        </div>

        <footer>
            <div class="footer-lines">
                <p class="footer-line">&copy; 2025 <a href="https://york9675.github.io/website/" target="_blank" rel="noopener noreferrer" class="link-text">York Development</a>. Made with ❤️ in Taiwan</p>
                <p class="footer-line"><a href="https://github.com/york9675/Tempo-Sync/releases/tag/v3.3.1" target="_blank" rel="noopener noreferrer" class="link-text">v3.3.1</a> • <a href="https://github.com/york9675/Tempo-Sync" target="_blank" rel="noopener noreferrer" class="link-text">View Source on GitHub</a> • <a href="https://www.buymeacoffee.com/york0524" target="_blank" rel="noopener noreferrer" class="link-text">Buy Me a Coffee</a></p>
            </div>
        </footer>
    </div>
    <div class="preset-panel" id="presetPanel" aria-hidden="true">
        <div class="preset-panel__backdrop" data-preset-close></div>
        <div class="preset-panel__content" role="dialog" aria-modal="true" aria-labelledby="presetPanelTitle">
            <div class="preset-panel__header">
                <h2 id="presetPanelTitle">Presets</h2>
                <button type="button" class="preset-close" id="presetCloseButton" aria-label="Close presets">
                    <i class="fa-solid fa-xmark" aria-hidden="true"></i>
                </button>
            </div>
            <div class="preset-panel__body">
                <div class="preset-panel__controls">
                    <div class="preset-history" id="presetHistory" aria-live="polite">
                        <div class="preset-card preset-card--history preset-card--empty" id="presetHistoryCard">
                            <div class="preset-card__header">
                                <div class="preset-card__info">
                                    <div class="preset-card__title">Last Played</div>
                                    <div class="preset-card__meta preset-card__meta--single">
                                        <span>No recent session yet. Start the metronome to capture your last settings.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="preset-actions">
                        <button type="button" class="preset-action-button" id="presetAddCustomToggle" aria-expanded="false" aria-controls="presetForm">
                            <i class="fa-solid fa-plus" aria-hidden="true"></i>
                            <span>Create Preset</span>
                        </button>
                        <form class="preset-form" id="presetForm" hidden>
                        <div class="preset-form-row">
                            <label for="presetTitleInput" class="preset-form-header">Title</label>
                            <input type="text" id="presetTitleInput" name="presetTitle" required maxlength="40" placeholder="Practice groove">
                        </div>
                        <div class="preset-form-row preset-form-grid">
                            <label for="presetTempoInput">
                                Tempo (BPM)
                                <input type="number" id="presetTempoInput" name="presetTempo" min="20" max="300" inputmode="numeric" required>
                            </label>
                            <label for="presetVolumeInput">
                                Volume (%)
                                <input type="number" id="presetVolumeInput" name="presetVolume" min="0" max="100" inputmode="numeric" required>
                            </label>
                        </div>
                        <div class="preset-form-row preset-form-time-signature">
                            <span class="preset-form-label">Time Signature</span>
                            <div class="preset-form-time-signature-controls">
                                <label for="presetBeatsInput" class="sr-only">Beats per measure</label>
                                <div class="preset-select">
                                    <select id="presetBeatsInput" name="presetBeats" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    </select>
                                </div>
                                <span aria-hidden="true">/</span>
                                <label for="presetBeatUnitInput" class="sr-only">Beat unit</label>
                                <div class="preset-select">
                                    <select id="presetBeatUnitInput" name="presetBeatUnit" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="4">4</option>
                                    <option value="8">8</option>
                                    </select>
                                </div>
                                <label class="preset-use-current-toggle">
                                    <input type="checkbox" id="presetUseCurrentCheckbox" name="presetUseCurrent">
                                    <span>Use Current</span>
                                </label>
                            </div>
                        </div>
                        <div class="preset-form-actions">
                            <button type="submit" class="preset-save-button">Save Preset</button>
                        </div>
                        </form>
                    </div>
                    <div class="io-group" id="presetIoControls">
                        <button type="button" class="preset-action-button preset-action-button--with-chevron" id="presetIoToggle" aria-expanded="false" aria-controls="presetIoPanel">
                            <i class="fa-solid fa-arrow-right-arrow-left" aria-hidden="true"></i>
                            <span class="preset-action-button__label">Import &amp; Export</span>
                            <i class="fa-solid fa-caret-down preset-action-button__chevron" aria-hidden="true"></i>
                        </button>
                        <div class="io-panel" id="presetIoPanel" hidden aria-hidden="true">
                            <div class="io-panel__actions">
                                <button type="button" class="io-panel__export-button" id="presetExportButton">
                                    <i class="fa-solid fa-upload" aria-hidden="true"></i>
                                    <span>Export Presets</span>
                                </button>
                            </div>
                            <div class="io-dropzone" id="presetDropZone" role="button" tabindex="0" aria-describedby="presetDropHint">
                                <div class="io-dropzone__icon" aria-hidden="true">
                                    <i class="fa-solid fa-cloud-arrow-up"></i>
                                </div>
                                <div class="io-dropzone__content">
                                    <strong>Drop preset JSON here</strong>
                                    <span class="io-dropzone__separator">or</span>
                                    <button type="button" class="io-dropzone__browse" id="presetImportButton">Browse Files</button>
                                </div>
                            </div>
                            <p class="io-dropzone__hint" id="presetDropHint">Supports Tempo Sync preset exports (.json). You can merge or replace after reviewing the prompt.</p>
                            <input type="file" id="presetImportInput" name="presetImportInput" accept="application/json" hidden aria-hidden="true">
                        </div>
                    </div>
                    <div class="preset-sort">
                        <label for="presetSortSelect">Sort</label>
                        <div class="preset-sort-controls">
                            <select id="presetSortSelect" name="presetSort">
                                <option value="time">Sort by Time</option>
                                <option value="custom">Custom Order</option>
                            </select>
                            <label class="preset-group-toggle" id="presetGroupToggle" hidden>
                                <input type="checkbox" id="presetGroupByTime" name="presetGroupByTime">
                                <span>Group by Time</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="preset-list" id="presetList" role="list"></div>
                <div class="preset-empty" id="presetEmptyState" hidden>
                    <p>No presets yet. Save your favorite settings to get started.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="theme-panel" id="themePanel" aria-hidden="true">
        <div class="theme-panel__backdrop" data-theme-close></div>
        <div class="theme-panel__content" role="dialog" aria-modal="true" aria-labelledby="themePanelTitle">
            <div class="theme-panel__header">
                <div class="theme-panel__header-text">
                    <h2 id="themePanelTitle">Themes</h2>
                    <p class="theme-panel__subtitle">Pick a palette, preview the vibe, and apply it instantly.</p>
                </div>
                <button type="button" class="theme-close" id="themeCloseButton" aria-label="Close themes">
                    <i class="fa-solid fa-xmark" aria-hidden="true"></i>
                </button>
            </div>
            <div class="theme-panel__body">
                <div class="theme-panel__sections" id="themeList" role="list"></div>
                <div class="theme-panel__custom" id="customThemeSection">
                    <header class="theme-panel__custom-header">
                        <div class="custom-theme-title-row">
                            <h3 class="theme-panel__custom-title">Custom Theme</h3>
                            <span class="custom-theme-badge">
                                <span class="custom-theme-badge-text">BETA</span>
                            </span>
                            <span class="custom-theme-badge" id="customThemeBadge" hidden>
                                <i class="fa-solid fa-check" aria-hidden="true"></i>
                                <span class="custom-theme-badge-text">Active</span>
                            </span>
                        </div>
                        <p class="theme-panel__custom-subtitle">Start with your accent color, then fine-tune every tone for a personalized palette.</p>
                    </header>
                    <form class="custom-theme-form" id="customThemeForm" novalidate>
                        <fieldset class="custom-theme-basic">
                            <legend class="sr-only">Accent Color</legend>
                            <div class="custom-theme-field">
                                <label for="customThemeColor">Accent Color</label>
                                <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                    <input type="color" id="customThemeColor" name="customThemeColor" value="#3b82f6" aria-describedby="customThemeHint">
                                    <input type="text" id="customThemeHex" name="customThemeHex" maxlength="9" placeholder="#3b82f6" inputmode="text" autocomplete="off" spellcheck="false">
                                        <button type="button" class="custom-theme-field-reset custom-theme-field-reset--accent" id="customThemeReset" aria-label="Reset custom theme colors" title="Reset custom theme">
                                            <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                        </button>
                                </div>
                                <p class="custom-theme-hint" id="customThemeHint">Accepts hex codes like #1f2937 or shorthand values (#123).</p>
                            </div>
                        </fieldset>
                        <div class="custom-theme-advanced">
                            <button type="button" class="custom-theme-advanced-toggle" id="customThemeAdvancedToggle" aria-expanded="false" aria-controls="customThemeAdvancedFields">
                                <span class="custom-theme-advanced-text">
                                    <span class="custom-theme-advanced-label">Advanced Palette</span>
                                    <span class="custom-theme-advanced-subtitle">Optional overrides for background, text, borders, and more</span>
                                </span>
                                <i class="fa-solid fa-caret-down" aria-hidden="true"></i>
                            </button>
                            <div class="custom-theme-advanced-fields" id="customThemeAdvancedFields" hidden>
                                <div class="custom-theme-advanced-fields-inner">
                                    <p class="custom-theme-hint custom-theme-hint--advanced">Leave fields blank to let Tempo Sync auto-generate them from your accent.</p>
                                    <div class="custom-theme-advanced-grid">
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemePrimaryHover">Accent Hover</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemePrimaryHover" name="customThemePrimaryHover" value="#2563eb">
                                            <input type="text" id="customThemePrimaryHoverHex" name="customThemePrimaryHoverHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="primaryHover" aria-label="Reset accent hover color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeBackground">Background</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeBackground" name="customThemeBackground" value="#f9fafb">
                                            <input type="text" id="customThemeBackgroundHex" name="customThemeBackgroundHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="background" aria-label="Reset background color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeContainer">Surface</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeContainer" name="customThemeContainer" value="#ffffff">
                                            <input type="text" id="customThemeContainerHex" name="customThemeContainerHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="container" aria-label="Reset surface color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeText">Primary Text</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeText" name="customThemeText" value="#1f2937">
                                            <input type="text" id="customThemeTextHex" name="customThemeTextHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="text" aria-label="Reset primary text color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeTextSecondary">Secondary Text</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeTextSecondary" name="customThemeTextSecondary" value="#6b7280">
                                            <input type="text" id="customThemeTextSecondaryHex" name="customThemeTextSecondaryHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="textSecondary" aria-label="Reset secondary text color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeBorder">Border</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeBorder" name="customThemeBorder" value="#e5e7eb">
                                            <input type="text" id="customThemeBorderHex" name="customThemeBorderHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="border" aria-label="Reset border color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    <div class="custom-theme-field custom-theme-field--compact">
                                        <label for="customThemeFlash">Downbeat Flash</label>
                                            <div class="custom-theme-inputs custom-theme-inputs--with-action">
                                            <input type="color" id="customThemeFlash" name="customThemeFlash" value="#60a5fa">
                                            <input type="text" id="customThemeFlashHex" name="customThemeFlashHex" maxlength="9" placeholder="Optional override" inputmode="text" autocomplete="off" spellcheck="false">
                                                <button type="button" class="custom-theme-field-reset" data-field-key="flash" aria-label="Reset downbeat flash color">
                                                    <i class="fa-solid fa-rotate-left" aria-hidden="true"></i>
                                                </button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="custom-theme-actions">
                            <button type="submit" class="preset-save-button">Apply Theme</button>
                        </div>
                        <p class="custom-theme-error" id="customThemeError" role="alert" aria-live="polite" hidden></p>
                    </form>
                    <div class="io-group" id="themeIoControls">
                        <button type="button" class="preset-action-button preset-action-button--with-chevron theme-io-toggle" id="themeIoToggle" aria-expanded="false" aria-controls="themeIoPanel">
                            <i class="fa-solid fa-arrow-right-arrow-left" aria-hidden="true"></i>
                            <span class="preset-action-button__label">Import &amp; Export</span>
                            <i class="fa-solid fa-caret-down preset-action-button__chevron" aria-hidden="true"></i>
                        </button>
                        <div class="io-panel" id="themeIoPanel" hidden aria-hidden="true">
                            <div class="io-panel__actions">
                                <button type="button" class="io-panel__export-button" id="themeExportButton">
                                    <i class="fa-solid fa-upload" aria-hidden="true"></i>
                                    <span>Export Custom Theme</span>
                                </button>
                            </div>
                            <div class="io-dropzone" id="themeDropZone" role="button" tabindex="0" aria-describedby="themeDropHint">
                                <div class="io-dropzone__icon" aria-hidden="true">
                                    <i class="fa-solid fa-cloud-arrow-up"></i>
                                </div>
                                <div class="io-dropzone__content">
                                    <strong>Drop theme JSON here</strong>
                                    <span class="io-dropzone__separator">or</span>
                                    <button type="button" class="io-dropzone__browse" id="themeImportButton">Browse Files</button>
                                </div>
                            </div>
                            <p class="io-dropzone__hint" id="themeDropHint">Supports Tempo Sync custom theme exports (.json). Import to sync your palette across devices.</p>
                            <input type="file" id="themeImportInput" name="themeImportInput" accept="application/json" hidden aria-hidden="true">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="custom-alert" id="customAlert" role="alertdialog" aria-modal="true" aria-labelledby="customAlertTitle" aria-describedby="customAlertMessage">
        <div class="custom-alert__backdrop" data-alert-close></div>
        <div class="custom-alert__content">
            <h3 class="custom-alert__title" id="customAlertTitle"></h3>
            <p class="custom-alert__message" id="customAlertMessage"></p>
            <div class="custom-alert__actions" id="customAlertActions"></div>
        </div>
    </div>
    <script type="module" src="script.js"></script>
</body>
</html>
